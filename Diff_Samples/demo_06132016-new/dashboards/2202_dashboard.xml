<?xml version="1.0" encoding="UTF-8"?><report name="Apple Time Away Balance" version="" schema=""><prompts><varPrompt label='As of Date' variable='AsOfDate' dataType='date' default='2016-01-01 00:00:00'/><varPrompt label='AsOfDateInt' variable='AsOfDateInt' dataType='integer' default='0'/></prompts><layout><table id="82739fe1-ac09-f7e6-b019-196281ae36d4" maxRows="0" autoRefresh="true" transpose="false" aggregation="true" total="false" subtotal="false"><properties><property name="caption" value="Final Balance 2 Gives an Error"/><property name="numberOfElementsInRow" value="1"/><property name="height" value="450"/><property name="automaticHeight" value="0"/></properties><binding><row field="Leave_Test.BLT_BALANCE.bgCode" label="BG Code" datatype= "string"  function= "dimension" ><format type="0"></format></row><row field="Leave_Test.BLT_BALANCE.timeAwayTypeCode" label="Time Away Code" datatype= "string"  function= "dimension" ><format type="0"></format></row><row field="Leave_Test.BLT_BALANCE.dsId" label="DSID" datatype= "integer"  function= "measure" ><format type="0"></format></row><measure field="Leave_Test.BLT_BALANCE_MONTH_TRANSACTIONS.months_transactions_amount" label="MonthTransactions-AsOfDateMonth" aggregation="sum" runningTotal="false" function= "dimension" ><filter><cond label='MonthYear Filter' dataType='formula' function='formula' op='IS_TRUE' formula='and(year($AsOfDate)= Leave_Test.BLT_BALANCE_MONTH.months_year,month($AsOfDate)=Leave_Test.BLT_BALANCE_MONTH.months_month)' value=''/></filter><format numberFormat = "6" seriesType = "line" ></format><properties><property name="format" value="#.##"/></properties></measure><measure label="StartingBalance - AsOfDate" formula="sum(lastVersion(Leave_Test.BLT_BALANCE_MONTH.months_startingBalance, Leave_Test.BLT_BALANCE_MONTH.months_dsId, Leave_Test.BLT_BALANCE_MONTH.months_month))" aggregation="formula" runningTotal="false"><filter><cond label='Month&#x2F;Year Filter' dataType='formula' function='formula' op='IS_TRUE' formula='and(year($AsOfDate)= Leave_Test.BLT_BALANCE_MONTH.months_year,month($AsOfDate)=Leave_Test.BLT_BALANCE_MONTH.months_month)' value=''/></filter><format numberFormat = "6" seriesType = "line" ></format><properties><property name="format" value="#.##"/></properties></measure><measure label="MonthBalance" formula="sum(lastVersion(Leave_Test.BLT_BALANCE_MONTH.months_startingBalance, Leave_Test.BLT_BALANCE_MONTH.months_dsId, Leave_Test.BLT_BALANCE_MONTH.months_month))" aggregation="sum" runningTotal="false"><filter><cond label='MonthFilter' dataType='formula' function='formula' op='IS_TRUE' formula='month($AsOfDate) = Leave_Test.BLT_BALANCE_MONTH.months_month' value=''/></filter><format numberFormat = "6" seriesType = "line" ></format><properties><property name="format" value="#.##"/></properties></measure><measure label="MonthTransactionsAsOfDate" formula="sum(Leave_Test.BLT_BALANCE_MONTH_TRANSACTIONS.months_transactions_amount)" aggregation="sum" runningTotal="false"><filter><cond label='TxnDateFilter' dataType='formula' function='formula' op='IS_TRUE' formula='Leave_Test.BLT_BALANCE_MONTH_TRANSACTIONS.months_transactions_day &lt;= $AsOfDateInt' value=''/><cond label='TrnxMonthFilter' dataType='formula' function='formula' op='IS_TRUE' formula='month($AsOfDate) = Leave_Test.BLT_BALANCE_MONTH_TRANSACTIONS.months_transactions_month' value=''/></filter><format numberFormat = "6" seriesType = "line" ></format><properties><property name="format" value="#.##"/></properties></measure><measure label="Final Balance" formula="sum(lastVersion(Leave_Test.BLT_BALANCE_MONTH.months_startingBalance, Leave_Test.BLT_BALANCE_MONTH.months_dsId, Leave_Test.BLT_BALANCE_MONTH.months_month)) + sum(Leave_Test.BLT_BALANCE_MONTH_TRANSACTIONS.months_transactions_amount)" aggregation="formula" runningTotal="false"><filter><cond label='BalanceMonthFilter' dataType='formula' function='formula' op='IS_TRUE' formula='month($AsOfDate) = Leave_Test.BLT_BALANCE_MONTH.months_month' value=''/><cond label='TxnMonthFilter' dataType='formula' function='formula' op='IS_TRUE' formula='month($AsOfDate) = Leave_Test.BLT_BALANCE_MONTH_TRANSACTIONS.months_transactions_month' value=''/></filter><format numberFormat = "6" seriesType = "line" ></format><properties><property name="format" value="#.##"/></properties></measure><measure label="Final Balance2" formula="sum(lastVersion(Leave_Test.BLT_BALANCE_MONTH.months_startingBalance, Leave_Test.BLT_BALANCE_MONTH.months_dsId, Leave_Test.BLT_BALANCE_MONTH.months_month)) + sum(if(and(month($AsOfDate)=Leave_Test.BLT_BALANCE_MONTH_TRANSACTIONS.months_transactions_month,Leave_Test.BLT_BALANCE_MONTH_TRANSACTIONS.months_transactions_day &lt;= $AsOfDateInt),Leave_Test.BLT_BALANCE_MONTH_TRANSACTIONS.months_transactions_amount,0))" aggregation="sum" runningTotal="false"><format seriesType = "line" ></format><properties><property name="format" value="###,###.00"/></properties></measure></binding><format coloringScheme="0" showLegend="1"/></table></layout></report>